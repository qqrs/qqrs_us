<!DOCTYPE html>
<html lang="en"><head><title>raspberry pi pico</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="raspberry pi pico"/><meta property="og:description" content="The Raspberry Pi Pico is a full-featured Arm-core microcontroller for $4 ($7 with Wi-Fi and pre-soldered headers). There are C and MicroPython SDKs, and there is community support for Rust."/><meta property="og:image" content="https://qqrs.us/qqkb/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="The Raspberry Pi Pico is a full-featured Arm-core microcontroller for $4 ($7 with Wi-Fi and pre-soldered headers). There are C and MicroPython SDKs, and there is community support for Rust."/><meta name="generator" content="Quartz"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="hwhack/embedded/raspberry-pi-pico"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../..">qqkb</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;howto&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/archiving&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/hobbies&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/sysadmin&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;hwhack&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;hwhack/embedded&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;swhack&quot;,&quot;collapsed&quot;:true}]" aria-controls="explorer-content" aria-expanded="false"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto"><button class="folder-button"><span class="folder-title">howto</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/archiving"><button class="folder-button"><span class="folder-title">archiving</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/archiving"><li><a href="../../howto/archiving/artwork" data-for="howto/archiving/artwork">artwork</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/hobbies"><button class="folder-button"><span class="folder-title">hobbies</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/hobbies"><li><a href="../../howto/hobbies/ham-radio" data-for="howto/hobbies/ham-radio">ham radio</a></li><li><a href="../../howto/hobbies/ham-radio-baofeng" data-for="howto/hobbies/ham-radio-baofeng">ham radio baofeng</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/sysadmin"><button class="folder-button"><span class="folder-title">sysadmin</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/sysadmin"><li><a href="../../howto/sysadmin/password-manager" data-for="howto/sysadmin/password-manager">password manager</a></li></ul></div></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="hwhack"><button class="folder-button"><span class="folder-title">hwhack</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="hwhack"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="hwhack/embedded"><button class="folder-button"><span class="folder-title">embedded</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="hwhack/embedded"><li><a href="../../hwhack/embedded/raspberry-pi-pico" data-for="hwhack/embedded/raspberry-pi-pico">raspberry pi pico</a></li></ul></div></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="swhack"><button class="folder-button"><span class="folder-title">swhack</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="swhack"><li><a href="../../swhack/milkdrop" data-for="swhack/milkdrop">milkdrop</a></li><li><a href="../../swhack/strafejumping" data-for="swhack/strafejumping">strafejumping</a></li><li><a href="../../swhack/T3100e-vintage-computer" data-for="swhack/T3100e-vintage-computer">T3100e vintage computer</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../hwhack/">hwhack</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../hwhack/embedded/">embedded</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>raspberry pi pico</a></div></nav><h1 class="article-title">raspberry pi pico</h1><p show-comma="true" class="content-meta"><span>Sep 25, 2025</span><span>15 min read</span></p></div></div><article class="popover-hint"><p>The Raspberry Pi Pico is a full-featured Arm-core microcontroller for $4 ($7 with Wi-Fi and pre-soldered headers). There are C and MicroPython SDKs, and there is community support for Rust.</p>
<p>One unique feature of the RP2040 chip is the PIO state machine module—useful for driving interfaces with tight timing requirements (e.g., for LED strips) without tying up the CPU.</p>
<p>The Raspberry Pi Pico 2 (released 2024) is $5 and the RP2350 chip has extensive security feature upgrades. There was a <a href="https://hackaday.com/2024/09/20/raspberry-pi-rp2350-e9-erratum-redefined-as-input-mode-leakage-current/" class="external">GPIO input current leakage bug<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> that has been fixed in the <a href="https://hackaday.com/2025/07/31/raspberry-pi-rp2350-a4-stepping-addresses-e9-current-leakage-bug/" class="external">latest stepping<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>.</p>
<p>There is also a Raspberry Pi Debug Probe for $12 (very useful).</p>
<h2 id="c-sdk">C SDK<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c-sdk" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>These are my notes from getting up and running with the C SDK on Mac OS. I had to dig to find documentation I needed so this is an attempt to collect it all in one place.</p>
<p>Warning: it’s more of a devlog than a howto. But it has all the info I wish I had when I was getting started.</p>
<p><span>→</span> <strong>See these first:</strong> <span>←</span></p>
<ul>
<li><a href="https://www.raspberrypi.com/documentation/microcontrollers/c_sdk.html" class="external">https://www.raspberrypi.com/documentation/microcontrollers/c_sdk.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://datasheets.raspberrypi.com/pico/getting-started-with-pico.pdf" class="external">https://datasheets.raspberrypi.com/pico/getting-started-with-pico.pdf<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://datasheets.raspberrypi.com/pico/raspberry-pi-pico-c-sdk.pdf" class="external">https://datasheets.raspberrypi.com/pico/raspberry-pi-pico-c-sdk.pdf<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<h3 id="precompiled-binaries">Precompiled binaries<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#precompiled-binaries" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Start by loading precompiled example programs…</p>
<p><a href="https://www.raspberrypi.com/documentation/microcontrollers/c_sdk.html#your-first-binaries" class="external">https://www.raspberrypi.com/documentation/microcontrollers/c_sdk.html#your-first-binaries<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<h3 id="mac-os-toolchain-installation">Mac OS toolchain installation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mac-os-toolchain-installation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>To compile your own programs…</p>
<ul>
<li><a href="https://www.raspberrypi.com/documentation/microcontrollers/c_sdk.html#quick-start-your-own-project" class="external">“Quick-start your own project” guide<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://datasheets.raspberrypi.com/pico/getting-started-with-pico.pdf" class="external">Getting Started with the Raspberry Pi Pico-series<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> pdf
<ul>
<li>p. 32 Appendix C: Manual toolchain setup: Manually Configure your Environment</li>
</ul>
</li>
</ul>
<p>These didn’t have complete info for Mac OS so I also relied on this video:</p>
<ul>
<li>YouTube: <a href="https://www.youtube.com/watch?v=B5IinAgYjS8" class="external">Raspberry Pi Pico - C/C++ SDK Setup [macOS]<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>I was using the Pico W (version with Wi-Fi).</p>
<p>Here are commands I ran:</p>
<pre><code>brew install make cmake git gcc-arm-embedded libusb
</code></pre>
<pre><code>git clone https://github.com/raspberrypi/pico-sdk.git
cd pico-sdk
git submodule update --init

cd ..
git clone https://github.com/raspberrypi/pico-examples.git
</code></pre>
<pre><code>mkdir hello-pico
cd hello-pico

cp ../pico-examples/pico_w/wifi/blink/picow_blink.c blink.c
cp ../pico-examples/pico_sdk_import.cmake .

# CMakeLists.txt from the video
wget https://gist.githubusercontent.com/eldelto/0740e8f5259ab528702cef74fa96622e/raw/c8dc72471aaf22f79b677eaac2db8b542b01b1b0/CMakeLists.txt

# edit CMakeLists.txt to uncomment line for Pico W
</code></pre>
<pre><code>brew install picotool
# or alternative: export PICOTOOL_FETCH_FROM_GIT_PATH=../../picotool
</code></pre>
<pre><code>cd build

export PICO_BOARD=pico_w
export PICO_SDK_PATH=../../pico-sdk
cmake ..

# or alternative: cmake -DPICO_BOARD=pico_w -DPICO_SDK_PATH=../../pico-sdk ..

make -j8        # 8 cores

# hold down BOOTSEL and connect USB
cp blink.uf2 /Volumes/RPI-RP2
</code></pre>
<h4 id="troubleshooting">Troubleshooting<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#troubleshooting" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>Make sure you’re in the <code>build</code> directory and running <code>cmake ..</code>. Note the <code>..</code>.</p>
<p>If you get errors, you may need to do a clean rebuild by deleting the entire <code>build</code> directory and starting over at <code>cmake ..</code>. E.g., I had to do this after running cmake in the wrong directory.</p>
<p><a href="https://forums.raspberrypi.com/viewtopic.php?p=2104413&amp;sid=4ec1d5d0f684a9e3a1a4041f92b67296#p2104413" class="external">run cmake again or just make?<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<blockquote>
<p>Usually just running ‘make’ will detect changes in ‘CMakeLists.txt’ and automatically run a ‘cmake ..’ However; there can be times when changes in ‘CMakeLists.txt’ are simply ignored and even a manual ‘cmake ..’ won’t resolve that. You then need to delete the entire ‘./build’ folder and re-build from the start.</p>
</blockquote>
<h4 id="saving-build-envs">Saving build envs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#saving-build-envs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>Save the build config env vars so you don’t have to keep retyping/autocompleting them.</p>
<p>Save to picoenvs.sh:</p>
<pre><code>export PICO_BOARD=pico_w
export PICO_SDK_PATH=~/path/to/pico-sdk
export WIFI_SSID='Your SSID here'
export WIFI_PASSWORD='Your passphrase here'
</code></pre>
<p>then <code>source</code> it when opening a terminal session.</p>
<p>Add to ~/.profile</p>
<pre><code>alias make=&quot;/usr/bin/make -j 8&quot;
</code></pre>
<p>Now it’s just</p>
<pre><code>cd build
cmake ..
make

# hold down BOOTSEL and connect USB
cp blink.uf2 /Volumes/RPI-RP2
</code></pre>
<h2 id="building-example-code">Building example code<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#building-example-code" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Raspberry Pi supplies a few dozen example programs for the Pico. See the readme.</p>
<p><a href="https://github.com/raspberrypi/pico-examples" class="external">https://github.com/raspberrypi/pico-examples<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Note that some only work on the RP2350 chip.</p>
<h3 id="blink">blink<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#blink" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>(This assumes the pico-sdk and pico-examples repos were cloned during toolchain setup.)</p>
<pre><code>source ~/path/to/picoenvs.sh
cd pico-examples

mkdir build
cd build
cmake ..

cd blink
make

# hold down BOOTSEL and connect USB
cp blink.uf2 /Volumes/RPI-RP2
</code></pre>
<p>tried these examples:<br/>
<span>→</span> blink<br/>
<span>→</span> pico_w/wifi/blink</p>
<p>Both examples blink the LED on the board.</p>
<h3 id="hello_world">hello_world<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hello_world" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><span>→</span> hello_world/usb</p>
<p>Note: stdio is directed to USB. The Pico should be connected to the computer via its USB port. See <a href="#serial-debugging" class="internal alias">serial debugging</a>.</p>
<pre><code>screen /dev/tty.usbmodem2302 115200    # or similar name
</code></pre>
<p><code>Ctrl+a</code> then <code>k</code> to quit <code>screen</code></p>
<h3 id="wifi_scan">wifi_scan<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#wifi_scan" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><span>→</span> pico_w/wifi/wifi_scan</p>
<p>Note: stdio is directed to UART by default. You can either connect to the UART or edit the project to redirect stdio to USB instead. See <a href="#serial-debugging" class="internal alias">serial debugging</a>.</p>
<h3 id="ntp_client-tls_client">ntp_client, tls_client<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#ntp_client-tls_client" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>network time protocol and transport layer security</p>
<p><span>→</span> pico_w/wifi/ntp_client<br/>
<span>→</span> pico_w/wifi/tls_client</p>
<p>Note that <code>WIFI_SSID</code> and <code>WIFI_PASSWORD</code> env vars must be set or cmake will skip building these examples.</p>
<pre><code>Skipping ntp_client example as WIFI_SSID is not defined
</code></pre>
<p>Note: stdio is directed to UART by default. You can either connect to the UART or edit the project to redirect stdio to USB instead. See <a href="#serial-debugging" class="internal alias">serial debugging</a>.</p>
<h2 id="programming-and-debugging">Programming and debugging<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#programming-and-debugging" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="overview">Overview<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#overview" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>options for programming:</p>
<ol>
<li>program via USB as mass storage volume</li>
<li>program via USB with picotool</li>
<li>program via SWD with openocd (requires Debug Probe)</li>
</ol>
<p>options for debugging:</p>
<ol>
<li>printf debugging via USB virtual serial port</li>
<li>printf debugging via UART (requires usb-to-serial adapter or Debug Probe)</li>
<li>gdb/lldb debugging via SWD with openocd (requires Debug Probe)</li>
</ol>
<p>A Raspberry Pi Debug Probe ($12) is quick to set up and lets you program via SWD, use gdb/lldb debugger, and monitor the UART output—with no need to continually unplug and reconnect cables. Highly recommended for development.</p>
<p>Note that the Pico with pre-soldered headers has a JST connector for the SWD debug port, but the Pico without headers doesn’t. You’ll need to solder on header pins to use SWD.</p>
<h3 id="serial-debugging">serial debugging<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#serial-debugging" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Good old printf debugging works.</p>
<pre><code>printf(&quot;Hello, world!\n&quot;);
</code></pre>
<h4 id="uart">UART<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#uart" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>By default, stdio is directed to UART. You can connect with the Debug Probe or any other usb-to-serial TTL level adapter (FTDI, etc.).</p>
<p>RX/TX/GND connect to pins 1/2/3 on the Pico. See <a href="https://www.raspberrypi.com/documentation/microcontrollers/debug-probe.html#getting-started" class="external">diagram<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>.</p>
<pre><code>brew install minicom
</code></pre>
<pre><code>ls /dev/tty.usbmodem*
</code></pre>
<pre><code>minicom -b 115200 -o -D /dev/tty.usbmodem2302    # or similar name
# or alternative: screen /dev/tty.usbmodem2302 115200
</code></pre>
<h4 id="usb">USB<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#usb" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>You can also redirect stdio to USB. The Pico has built-in support to emulate a virtual serial port over its USB port. This way all you need is a USB cable.</p>
<p>The <code>hello_world</code> example shows how you would configure the CMakeLists.txt. It would look something like this:</p>
<pre><code># enable usb output, disable uart output
pico_enable_stdio_usb(hello_usb 1)
pico_enable_stdio_uart(hello_usb 0)
</code></pre>
<h3 id="picotool">picotool<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#picotool" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>query and program Pico via USB</p>
<p><strong>See first:</strong></p>
<ul>
<li><a href="https://rptl.io/pico-get-started" class="external">Getting Started with the Raspberry Pi Pico<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> Appendix B</li>
<li><a href="https://github.com/raspberrypi/picotool" class="external">https://github.com/raspberrypi/picotool<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>you must first reboot while holding the BOOTSEL button or</p>
<blockquote>
<p>as of version 1.1 of picotool it is also possible to interact with Raspberry Pi microcontrollers that are not in BOOTSEL mode, but are using USB stdio support from the SDK by using the -f argument of picotool.</p>
</blockquote>
<pre><code>brew install picotool
</code></pre>
<p>useful commands to try</p>
<pre><code>picotool info
picotool info -a
picotool load blink.uf2
picotool reboot
</code></pre>
<p>handy way to reboot into BOOTSEL mode<br/>
(Note: only works if the loaded program is configured for USB stdio. E.g., you could load pico-examples/hello-world/usb via USB mass storage method.)</p>
<pre><code>picotool info -f
</code></pre>
<h3 id="openocd">openocd<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#openocd" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>program Pico via SWD</p>
<p>connect Debug Probe JST-SH for SWD and RX/TX/GND pins for <a href="#uart" class="internal alias">UART</a></p>
<p><strong>See first:</strong></p>
<ul>
<li><a href="https://www.raspberrypi.com/documentation/microcontrollers/debug-probe.html" class="external">https://www.raspberrypi.com/documentation/microcontrollers/debug-probe.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<h4 id="installing-for-rp2350">Installing for RP2350<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#installing-for-rp2350" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>For RP2040, <code>brew install openocd</code> worked fine for me.</p>
<p>But for RP2350, I had to install Raspberry Pi Foundation’s fork of openocd. I followed instructions from <a href="https://youtu.be/WrA1C6Esjoo?&amp;t=382" class="external">this video<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I didn’t run into the compile error he shows in <code>batch.c:194</code> so it must be fixed.</p>
<pre><code>git clone git@github.com:raspberrypi/openocd.git
cd openocd
git submodule update --init --recursive
brew install libtool automake libusb wget pkg-config gcc texinfo capstone libftdi hidapi
./bootstrap
./configure --disable-werror
make -j4
sudo make install
</code></pre>
<p>There is also a warning that appears when programming <a href="https://github.com/raspberrypi/openocd/issues/120#issue-2681088258" class="external">which can be worked around<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> by adding <code>-c &quot;rp2350.dap.core1 cortex_m reset_config sysresetreq&quot;</code>. For example:</p>
<pre><code>openocd -f interface/cmsis-dap.cfg -f target/rp2350.cfg -c &quot;adapter speed 5000&quot; -c &quot;rp2350.dap.core1 cortex_m reset_config sysresetreq&quot; -c &quot;program blink.elf verify reset exit&quot;
</code></pre>
<h4 id="usage">Usage<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#usage" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>See also:</p>
<ul>
<li><a href="https://openocd.org/doc/html/General-Commands.html" class="external">https://openocd.org/doc/html/General-Commands.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>check Debug Probe firmware version</p>
<pre><code>$ openocd -f interface/cmsis-dap.cfg
...
Info : CMSIS-DAP: FW Version = 2.0.0
...
</code></pre>
<p>programming</p>
<pre><code>openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c &quot;adapter speed 5000&quot; -c &quot;program hello_serial.elf verify reset exit&quot;
</code></pre>
<p>reboot pico</p>
<pre><code>openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c &quot;adapter speed 5000&quot; -c &quot;init&quot; -c &quot;reset run&quot; -c &quot;shutdown&quot;
</code></pre>
<p>halt pico</p>
<pre><code>openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c &quot;adapter speed 5000&quot; -c &quot;init&quot; -c &quot;reset halt&quot; -c &quot;shutdown&quot;
</code></pre>
<h3 id="gdblldb-debugging">gdb/lldb debugging<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#gdblldb-debugging" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>TODO: arm-none-eabi-gdb</p>
<p>See this:</p>
<ul>
<li><a href="https://web.navan.dev/posts/2024-08-08-openocd-macos-lldb.html" class="external">https://web.navan.dev/posts/2024-08-08-openocd-macos-lldb.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>See also:</p>
<ul>
<li><a href="https://lldb.llvm.org/use/map.html" class="external">GDB to LLDB command map<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>start openocd server</p>
<pre><code>openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c &quot;adapter speed 5000&quot;
</code></pre>
<p>connect with lldb</p>
<pre><code>lldb path/to/project.elf
</code></pre>
<pre><code>(lldb) platform select remote-gdb-server
(lldb) process connect connect://localhost:3333
</code></pre>
<p>useful commands:</p>
<pre><code>- breakpoint set --hardware --name function_name
  - br list / br delete / br enable / br disable
- continue / c
- step / s - step in
- next / n - step over
- finish - step out
- stepi / si // nexti / ni - by instruction
</code></pre>
<pre><code>- print / p
  - parray, po, poarray
</code></pre>
<pre><code>- list / l
- disassemble (?) / di
- backtrace / bt
- frame variable
- register read
- var / v
- x
</code></pre>
<pre><code>- memory read --size 4 --format x --count 10 0x10000000
</code></pre>
<pre><code>- repl
</code></pre>
<p>reboot target</p>
<pre><code>(lldb) process plugin packet monitor reset run
</code></pre>
<p>create an <code>~/.lldbinit</code> file:</p>
<pre><code>command alias bh breakpoint set --hardware --name %1
</code></pre>
<h3 id="flashing-from-the-makefile">flashing from the makefile<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#flashing-from-the-makefile" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>(derived from <a href="https://github.com/harbaum/FPGA-Companion/blob/402fb4cab27c88df3b5b92e0250908b69d0c8452/src/rp2040/CMakeLists.txt#L89" class="external">this project on github<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>)</p>
<p>To program with <code>make flash</code>, add this to CMakeLists.txt</p>
<pre><code>set(PROJECT hello_serial)
add_custom_target(flash
    COMMAND echo &quot;Flashing ${PROJECT} ...&quot;
    COMMAND openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c &quot;adapter speed 5000&quot; -c &quot;program ${PROJECT}.elf verify reset exit&quot;
    DEPENDS &quot;${PROJECT}&quot;
    COMMENT &quot;Flash target using openocd&quot;
)
</code></pre>
<p>And for <code>make reboot</code>, <code>make halt</code>, and <code>make term</code>:</p>
<pre><code>add_custom_target(reboot
    COMMAND echo &quot;Rebooting ${PROJECT} ...&quot;
    COMMAND openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c init -c reset -c reboot -c exit
    COMMENT &quot;Reboot target using openocd&quot;
)

add_custom_target(halt
    COMMAND echo &quot;Halting ${PROJECT} ...&quot;
    COMMAND openocd -f interface/cmsis-dap.cfg -f target/rp2040.cfg -c init -c reset -c halt -c exit
    COMMENT &quot;Halt target using openocd&quot;
)

add_custom_target(term
    COMMAND minicom -b 115200 -o -D /dev/tty.usbmodem*
)
</code></pre>
<h2 id="mqtt">MQTT<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>MQTT is a lightweight pub-sub message queue protocol commonly used with embedded devices.</p>
<p>The pico C SDK includes <a href="#lwip-mqtt" class="internal alias">MQTT support as part of lwIP</a>, its TCP/IP stack. The pico-examples repo has an <a href="#mqtt-example" class="internal alias">MQTT example</a> that I adapted to <a href="#mqtt-example-with-adafruitio" class="internal alias">connect to adafruit.io</a> using <a href="#mqtt-example-with-adafruitio-and-tls-encryption" class="internal alias">TLS encryption</a>.</p>
<h3 id="mqtt-basics">MQTT basics<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-basics" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>MQTT concepts:</p>
<ul>
<li>connect to a broker</li>
<li>subscribe to a topic</li>
<li>publish a message to a topic</li>
<li>receive a message</li>
</ul>
<p>You’ll need an MQTT broker to connect to for testing:</p>
<ul>
<li>you can use the publicly available test server at <a href="https://test.mosquitto.org/" class="external">test.mosquitto.org<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li>you can install and run <code>mosquitto</code> locally (the pico-examples mqtt readme has instructions)</li>
<li>or, you can use <a href="https://io.adafruit.com/" class="external">Adafruit I/O<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> (free for basic plan)</li>
</ul>
<h3 id="lwip-mqtt">lwIP MQTT<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#lwip-mqtt" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>The pico C SDK includes MQTT support as part of lwIP, its TCP/IP stack.</p>
<ul>
<li><a href="https://www.raspberrypi.com/documentation/pico-sdk/networking.html" class="external">https://www.raspberrypi.com/documentation/pico-sdk/networking.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>The key piece is linking <code>pico_lwip_mqtt</code>.</p>
<pre><code>target_link_libraries(project_name_here
	...
	pico_lwip_mqtt
)
</code></pre>
<p>The lwIP documentation is a bit sparse, but everything needed is there if you poke around a little:</p>
<ul>
<li><a href="https://www.nongnu.org/lwip/2_1_x/group__mqtt.html" class="external">https://www.nongnu.org/lwip/2_1_x/group__mqtt.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://github.com/lwip-tcpip/lwip/blob/master/src/apps/mqtt/mqtt.c" class="external">lwip/src/apps/mqtt/mqtt.c<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://github.com/lwip-tcpip/lwip/blob/master/src/include/lwip/apps/mqtt.h" class="external">lwip/src/include/lwip/apps/mqtt.h<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>There’s also a short lwIP MQTT example with a pretty good tutorial:</p>
<ul>
<li><a href="https://github.com/lwip-tcpip/lwip/blob/master/contrib/examples/mqtt/mqtt_example.c" class="external">lwip/contrib/examples/mqtt/mqtt_example.c<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><strong><a href="https://github.com/lwip-tcpip/lwip/blob/master/doc/mqtt_client.txt" class="external">lwip/doc/mqtt_client.txt<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></strong></li>
</ul>
<p>The tutorial walks through the important stuff. It also mentions this critical caveat:</p>
<blockquote>
<p><strong>You need to increase MEMP_NUM_SYS_TIMEOUT by one if you use MQTT!</strong></p>
</blockquote>
<p>MEMP_NUM_SYS_TIMEOUT is the number of simultaneously active timeouts.</p>
<p>What it means is to add a line to <code>lwipopts.h</code>:</p>
<pre><code>#define MEMP_NUM_SYS_TIMEOUT        (LWIP_NUM_SYS_TIMEOUT_INTERNAL+1)
</code></pre>
<p>See also: pico-sdk <a href="https://github.com/raspberrypi/pico-sdk/issues/1106" class="external">issue #1106<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> <a href="https://github.com/raspberrypi/pico-sdk/issues/1725" class="external">issue #1725<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>When I first began working on this, pico-examples didn’t have an MQTT example, so I found a project on Github to use as a starting point.</p>
<ul>
<li><a href="https://github.com/cniles/picow-iot" class="external">https://github.com/cniles/picow-iot<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>I had to fiddle with the <code>CMakeLists.txt</code> to get it to pick up the Wi-Fi config. I also did some refactoring to make the code manageable (happy path to the left margin, etc.) and triangulated with the lwIP tutorial to get it working.</p>
<h3 id="mqtt-example">MQTT example<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-example" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><span>→</span> <a href="https://github.com/raspberrypi/pico-examples/tree/master/pico_w/wifi/mqtt" class="external">pico_w/wifi/mqtt<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>The pico-examples repo now has a full-fledged MQTT example:</p>
<ul>
<li>it logs sensor data to <code>/temperature</code> when the temperature changes</li>
<li>it controls the status LED with <code>/led on</code> and <code>/led off</code></li>
<li>it echoes <code>/print &lt;message></code> to UART</li>
<li>it responds to <code>/ping</code> with <code>/uptime &lt;seconds></code></li>
<li><code>/exit</code> causes it to disconnect</li>
</ul>
<p>It also supports TLS-encrypted MQTT connections.</p>
<p>This is an excellent starting point. It demos the functionality anyone is likely to need. It was pretty easy to get it running by following the README instructions.</p>
<h4 id="mqtt-example-on-mac-os">MQTT example on Mac OS<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-example-on-mac-os" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>The one sticking point is that the examples assume Linux on the host computer. There are some subtle differences with Mac OS.</p>
<p>Here’s what worked for me:</p>
<p>install and start mosquitto mqtt server</p>
<pre><code>brew install mosquitto
brew services start mosquitto
</code></pre>
<h5 id="without-tls">without TLS<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#without-tls" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h5>
<p>vim /opt/homebrew/etc/mosquitto/mosquitto.conf</p>
<pre><code>allow_anonymous true
listener 1883 0.0.0.0
</code></pre>
<pre><code>brew services restart mosquitto
</code></pre>
<p>set hostname (or IP address) of computer hosting the MQTT server</p>
<pre><code>export MQTT_SERVER=10.100.9.86
</code></pre>
<p>(then build the example and flash the device)</p>
<pre><code>mosquitto_pub -t '/led' -m on
mosquitto_pub -t '/led' -m off
</code></pre>
<p>(led turns on and off)</p>
<h5 id="with-tls">with TLS<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#with-tls" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h5>
<pre><code>cd /path/to/pico-examples/pico_w/wifi/mqtt/certs
bash makecerts.sh
</code></pre>
<p>(Note: <code>sh makecerts.sh</code> caused problems with the <code>echo -n</code>)</p>
<pre><code>cd /opt/homebrew/etc/mosquitto/
mkdir ca_certificates certs
cp /path/to/pico-examples/pico_w/wifi/mqtt/certs/\$MQTT_SERVER/ca.crt ca_certificates/
cp /path/to/pico-examples/pico_w/wifi/mqtt/certs/\$MQTT_SERVER/server.{crt,key} certs/
</code></pre>
<p>vim mosquitto.conf</p>
<pre><code>listener 8883 0.0.0.0
allow_anonymous true
cafile /opt/homebrew/etc/mosquitto/ca_certificates/ca.crt
certfile /opt/homebrew/etc/mosquitto/certs/server.crt
keyfile /opt/homebrew/etc/mosquitto/certs/server.key
require_certificate true
</code></pre>
<pre><code>brew services restart mosquitto
</code></pre>
<p>(rebuild the example - maybe do a full <code>rm -rf build</code> to be sure - and flash the device)</p>
<pre><code>cd /path/to/pico-examples/pico_w/wifi/mqtt/certs/
./pub.sh /led on
./sub.sh /uptime
</code></pre>
<pre><code>./pub.sh /ping
</code></pre>
<h4 id="mqtt-example-with-adafruitio">MQTT example with adafruit.io<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-example-with-adafruitio" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p><a href="https://io.adafruit.com/" class="external">Adafruit I/O<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> is a hosted MQTT broker service. The basic plan is free and allows 10 topics, 30 messages per minute, and 30 days retention. It’s a nice option if you don’t want to self-host.</p>
<p>Getting connected is pretty easy.</p>
<p><a href="https://learn.adafruit.com/adafruit-io/mqtt-api#connection-details-2825187" class="external">Adafruit IO MQTT API Connection Details<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<blockquote>
<p>Host: io.adafruit.com<br/>
Port: 1883 or 8883 (for SSL encrypted connection)<br/>
Username: your Adafruit account username<br/>
Password: your Adafruit IO key (click the “AIO Key” button on the dashboard)</p>
</blockquote>
<p>MQTT topic names follow this format:</p>
<blockquote>
<p>(username)/feeds/(feed name or key)<br/>
(username)/f/(feed name or key)</p>
</blockquote>
<p>The recommended MQTT protocol version is v3.1.1.</p>
<p>Getting the example running was fairly straightforward. I set the <code>MQTT_SERVER</code>, <code>MQTT_USERNAME</code>, and <code>MQTT_PASSWORD</code> env vars. I also needed to make <a href="https://github.com/qqrs/pico-examples/commit/8b1bdd6645e23a1170152049bdb23a5564951e99" class="external">a few code changes<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> to accommodate the topic naming scheme.</p>
<h4 id="mqtt-example-with-adafruitio-and-tls-encryption">MQTT example with adafruit.io and TLS encryption<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-example-with-adafruitio-and-tls-encryption" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>TODO</p>
<h4 id="mqtt-tls-verification-with-wireshark">MQTT TLS verification with Wireshark<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-tls-verification-with-wireshark" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>TODO</p>
<h4 id="mqtt-example-with-debugging">MQTT example with debugging<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mqtt-example-with-debugging" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>You can turn on debug logging by building in DEBUG mode:</p>
<pre><code>cd build
cmake .. -DCMAKE_BUILD_TYPE=DEBUG
cd pico_w/wifi/mqtt
make
</code></pre>
<p>For debugging TLS, this will produce output like this if the server’s certificate can’t be verified:</p>
<pre><code>mbedtls_ssl_handshake failed: -9984
</code></pre>
<p>-9984 is -0x2700 which corresponds to:</p>
<pre><code>#define MBEDTLS_ERR_X509_CERT_VERIFY_FAILED               -0x2700
</code></pre>
<p>For debugging the MQTT protocol, you can add a flag to <code>lwipopts.h</code>:</p>
<pre><code>#define MQTT_DEBUG LWIP_DBG_ON
</code></pre>
<p>which produces output like this:</p>
<pre><code>mqtt_publish: Publish with payload length 5 to topic &quot;temperature&quot;
mqtt_output_send: tcp_sndbuf: 11651 bytes, ringbuf_linear_available: 19, get 237, put 10
mqtt_parse_incoming: Remaining length after fixed header: 2
mqtt_parse_incoming: msg_idx: 4, cpy_len: 2, remaining 0
mqtt_message_received: PUBACK response with id 18
</code></pre>
<h2 id="c-sdk-bonus-libraries">C SDK bonus libraries<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c-sdk-bonus-libraries" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h4 id="hardware-hashing">Hardware hashing<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hardware-hashing" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>The RP2350 chip has hardware support for SHA-256.</p>
<p><a href="https://datasheets.raspberrypi.com/pico/raspberry-pi-pico-c-sdk.pdf" class="external">C SDK pdf<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<blockquote>
<p>To use this in mbedtls you need to define MBEDTLS_SHA256_ALT in your mbedtls_config.h. Use LIB_PICO_SHA256 to check if hardware SHA256 is supported and fallback to defining MBEDTLS_SHA256_C for the software SHA256 calculation.</p>
</blockquote>
<p><a href="https://github.com/raspberrypi/pico-examples/blob/master/sha/mbedtls_sha256/mbedtls_config.h" class="external">mbedtls_sha256/mbedtls_config.h<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> example:</p>
<pre><code>#if LIB_PICO_SHA256
// Enable hardware acceleration
#define MBEDTLS_SHA256_ALT
#else
#define MBEDTLS_SHA256_C
#endif
</code></pre>
<p>Benchmarking with <a href="https://github.com/raspberrypi/pico-examples/tree/master/sha/mbedtls_sha256" class="external">pico-examples/sha/mbedtls_sha256<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>, it’s ~14X faster to hash 1MB in hardware on RP2350.</p>





















<div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>RP2040 software</td><td>~950 ms</td></tr><tr><td>RP2350 software</td><td>~430 ms</td></tr><tr><td>RP2350 hardware</td><td>~30 ms</td></tr></tbody></table></div>
<h3 id="base64">base64<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#base64" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>base64 is a scheme for encoding binary data using only 64 printable text characters: <code>A-Z, a-z, 0-9, +, and /</code>.</p>
<p>There is pico support for base64 encoding and decoding via the mbedtls libraries. To use it, link the <code>pico_mbedtls</code> library and include <code>mbedtls/base64.h</code>.</p>
<p><a href="https://mbed-tls.readthedocs.io/projects/api/en/development/api/file/base64_8h/" class="external">mbed-tls docs<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>:</p>
<pre><code>int mbedtls_base64_decode(unsigned char *dst, size_t dlen, size_t *olen, const unsigned char *src, size_t slen)
</code></pre>
<h2 id="unit-testing">Unit testing<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#unit-testing" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="rpipicocpputest">RPIPicoCPPUTest<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#rpipicocpputest" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>I found a template project that integrates the CppUTest framework.</p>
<p>YouTube: <a href="https://www.youtube.com/watch?v=njzFfCUv6qA" class="external">C/C++ Unit Testing on Raspberry PI Pico<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Github: <a href="https://github.com/jondurrant/RPIPicoCPPUTest" class="external">RPIPicoCPPUTest<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<ul>
<li>Template Project for CPPUTest on Raspberry PI Pico</li>
</ul>
<p>I copied <code>RPIPicoCPPUTest/baremetal</code> into a new project directory and was able to use it as a base project already set up for unit tests.</p>
<p>To build the test target, I ran:</p>
<pre><code>mkdir build
cd build
cmake ..
make test
</code></pre>
<p>I was compiling for RP2350 and got errors around these lines in two CMakeLists.txt files:</p>
<pre><code>    PICO_DEFAULT_UART_RX_PIN=16
    PICO_DEFAULT_UART_TX_PIN=17
</code></pre>
<p>Removing them resolved the errors. I flashed the binary to the device, connected via UART terminal, and was able to see test runner output:</p>
<pre><code>RUNNING TESTS
...
Errors (1 failures, 3 tests, 2 ran, 4 checks, 0 ignored, 1 filtered out, 0 ms)
</code></pre>
<p>While poking through the CMakeLists.txt files, I made a few changes that seemed like a good idea: pinned the CPPUTest git hash; changed the destination dir for compiled targets to <code>bin/</code>, instead of <code>src/</code> and <code>test/</code>; and picked more descriptive names than <code>NAME</code> and <code>TEST_NAME</code> for the CMake variables referring to the targets.</p>
<p>I also added custom targets:</p>
<ul>
<li><code>make flash</code>, <code>make flash-tests</code> to flash the device using OpenOCD</li>
<li><code>make reboot</code> and <code>make halt</code> to reboot/halt the device</li>
<li><code>make term</code> to open a minicom terminal to the UART</li>
</ul>
<h3 id="cpputest">CppUTest<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cpputest" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<blockquote>
<p>CppUTest is a C/C++ based framework for unit testing and for test-driving your code. It is written in C++ but is used in C and C++ projects and frequently used in embedded systems.</p>
<p>CppUTest’s core design principles</p>
<ul>
<li>Simple to use and small</li>
<li>Portable to old and new platforms</li>
<li>Build with Test-driven Development in mind</li>
</ul>
</blockquote>
<p>LGTM!</p>
<p>The <a href="https://cpputest.github.io/manual.html" class="external">CppUTest manual<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> would only be about 9 pages long, if you printed it out. They aren’t kidding about “simple to use and small.”</p>
<p><a href="https://github.com/maxpeng/cpputest_example/tree/main" class="external">This repository<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> shows example usage, including how to <a href="https://github.com/maxpeng/cpputest_example/blob/main/tests/pythagorean_ut/CMakeLists.txt#L8" class="external">link function mocks<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>.</p></article><hr/><div class="page-footer"><div class="explorer mobile-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;howto&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/archiving&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/hobbies&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;howto/sysadmin&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;hwhack&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;hwhack/embedded&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;swhack&quot;,&quot;collapsed&quot;:true}]" aria-controls="explorer-content" aria-expanded="false"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto"><button class="folder-button"><span class="folder-title">howto</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/archiving"><button class="folder-button"><span class="folder-title">archiving</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/archiving"><li><a href="../../howto/archiving/artwork" data-for="howto/archiving/artwork">artwork</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/hobbies"><button class="folder-button"><span class="folder-title">hobbies</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/hobbies"><li><a href="../../howto/hobbies/ham-radio" data-for="howto/hobbies/ham-radio">ham radio</a></li><li><a href="../../howto/hobbies/ham-radio-baofeng" data-for="howto/hobbies/ham-radio-baofeng">ham radio baofeng</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="howto/sysadmin"><button class="folder-button"><span class="folder-title">sysadmin</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="howto/sysadmin"><li><a href="../../howto/sysadmin/password-manager" data-for="howto/sysadmin/password-manager">password manager</a></li></ul></div></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="hwhack"><button class="folder-button"><span class="folder-title">hwhack</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="hwhack"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="hwhack/embedded"><button class="folder-button"><span class="folder-title">embedded</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="hwhack/embedded"><li><a href="../../hwhack/embedded/raspberry-pi-pico" data-for="hwhack/embedded/raspberry-pi-pico">raspberry pi pico</a></li></ul></div></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="swhack"><button class="folder-button"><span class="folder-title">swhack</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="swhack"><li><a href="../../swhack/milkdrop" data-for="swhack/milkdrop">milkdrop</a></li><li><a href="../../swhack/strafejumping" data-for="swhack/strafejumping">strafejumping</a></li><li><a href="../../swhack/T3100e-vintage-computer" data-for="swhack/T3100e-vintage-computer">T3100e vintage computer</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class aria-controls="toc-content" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content" class><ul class="overflow"><li class="depth-0"><a href="#c-sdk" data-for="c-sdk">C SDK</a></li><li class="depth-1"><a href="#precompiled-binaries" data-for="precompiled-binaries">Precompiled binaries</a></li><li class="depth-1"><a href="#mac-os-toolchain-installation" data-for="mac-os-toolchain-installation">Mac OS toolchain installation</a></li><li class="depth-0"><a href="#building-example-code" data-for="building-example-code">Building example code</a></li><li class="depth-1"><a href="#blink" data-for="blink">blink</a></li><li class="depth-1"><a href="#hello_world" data-for="hello_world">hello_world</a></li><li class="depth-1"><a href="#wifi_scan" data-for="wifi_scan">wifi_scan</a></li><li class="depth-1"><a href="#ntp_client-tls_client" data-for="ntp_client-tls_client">ntp_client, tls_client</a></li><li class="depth-0"><a href="#programming-and-debugging" data-for="programming-and-debugging">Programming and debugging</a></li><li class="depth-1"><a href="#overview" data-for="overview">Overview</a></li><li class="depth-1"><a href="#serial-debugging" data-for="serial-debugging">serial debugging</a></li><li class="depth-1"><a href="#picotool" data-for="picotool">picotool</a></li><li class="depth-1"><a href="#openocd" data-for="openocd">openocd</a></li><li class="depth-1"><a href="#gdblldb-debugging" data-for="gdblldb-debugging">gdb/lldb debugging</a></li><li class="depth-1"><a href="#flashing-from-the-makefile" data-for="flashing-from-the-makefile">flashing from the makefile</a></li><li class="depth-0"><a href="#mqtt" data-for="mqtt">MQTT</a></li><li class="depth-1"><a href="#mqtt-basics" data-for="mqtt-basics">MQTT basics</a></li><li class="depth-1"><a href="#lwip-mqtt" data-for="lwip-mqtt">lwIP MQTT</a></li><li class="depth-1"><a href="#mqtt-example" data-for="mqtt-example">MQTT example</a></li><li class="depth-0"><a href="#c-sdk-bonus-libraries" data-for="c-sdk-bonus-libraries">C SDK bonus libraries</a></li><li class="depth-1"><a href="#base64" data-for="base64">base64</a></li><li class="depth-0"><a href="#unit-testing" data-for="unit-testing">Unit testing</a></li><li class="depth-1"><a href="#rpipicocpputest" data-for="rpipicocpputest">RPIPicoCPPUTest</a></li><li class="depth-1"><a href="#cpputest" data-for="cpputest">CppUTest</a></li></ul></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="../../" class="internal">hello</a></li></ul></div></div><footer class><p>Copyleft <span style="display: inline-block; transform: scaleX(-1);">©</span> &amp; Copyright © 2024 OmniLore Interactive, a division of Yoyodyne Industries. Some rights reserved.</p><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> © 2025</p><ul></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          let mermaidImport = undefined
          document.addEventListener('nav', async () => {
            if (document.querySelector("code.mermaid")) {
              mermaidImport ||= await import('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs')
              const mermaid = mermaidImport.default
              const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
              mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                theme: darkMode ? 'dark' : 'default'
              })

              await mermaid.run({
                querySelector: '.mermaid'
              })
            }
          });
          </script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js" type="application/javascript"></script><script src="../../postscript.js" type="module"></script></html>